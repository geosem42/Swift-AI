import{d as y,r as n,o as p,b as v,w as r,k as a,e as o,i as J,f as t,m as d,v as u,p as P,j as w,n as c}from"./app-9e33c640.js";import{J as S}from"./Button-6a91530d.js";import{J as $}from"./FormSection-28ffd9c9.js";import{J as k}from"./Input-2edcdd1e.js";import{J as C}from"./InputError-fc966430.js";import{J as I}from"./Label-9db51818.js";import{J as V}from"./ActionMessage-5c5087b8.js";import{J as N}from"./SecondaryButton-332648cf.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";const F=y({components:{JetActionMessage:V,JetButton:S,JetFormSection:$,JetInput:k,JetInputError:C,JetLabel:I,JetSecondaryButton:N},props:["user"],data(){return{form:this.$inertia.form({_method:"PUT",name:this.user.name,email:this.user.email,photo:null}),photoPreview:null}},methods:{updateProfileInformation(){this.$refs.photo&&(this.form.photo=this.$refs.photo.files[0]),this.form.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>this.clearPhotoFileInput()})},selectNewPhoto(){this.$refs.photo.click()},updatePhotoPreview(){const e=this.$refs.photo.files[0];if(!e)return;const s=new FileReader;s.onload=f=>{this.photoPreview=f.target.result},s.readAsDataURL(e)},deletePhoto(){this.$inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{this.photoPreview=null,this.clearPhotoFileInput()}})},clearPhotoFileInput(){var e;(e=this.$refs.photo)!=null&&e.value&&(this.$refs.photo.value=null)}}}),U={key:0,class:"mb-3"},A={class:"mt-2"},E=["src"],L={class:"mt-2"},R=["src"],D={class:"w-75"},M={class:"mb-3"},T={class:"mb-3"},z={class:"spinner-border spinner-border-sm",role:"status"},q=t("span",{class:"visually-hidden"},"Loading...",-1),G=[q];function H(e,s,f,K,O,Q){const g=n("jet-action-message"),l=n("jet-label"),h=n("jet-secondary-button"),m=n("jet-input-error"),_=n("jet-input"),b=n("jet-button"),j=n("jet-form-section");return p(),v(j,{onSubmitted:e.updateProfileInformation},{title:r(()=>[a(" Profile Information ")]),description:r(()=>[a(" Update your account's profile information and email address. ")]),form:r(()=>[o(g,{on:e.form.recentlySuccessful},{default:r(()=>[a(" Saved. ")]),_:1},8,["on"]),e.$page.props.jetstream.managesProfilePhotos?(p(),J("div",U,[t("input",{type:"file",hidden:"",ref:"photo",onChange:s[0]||(s[0]=(...i)=>e.updatePhotoPreview&&e.updatePhotoPreview(...i))},null,544),o(l,{for:"photo",value:"Photo"}),d(t("div",A,[t("img",{src:e.user.profile_photo_url,alt:"Current Profile Photo",class:"rounded-circle w-25"},null,8,E)],512),[[u,!e.photoPreview]]),d(t("div",L,[t("img",{src:e.photoPreview,class:"rounded-circle",width:"80px",height:"80px"},null,8,R)],512),[[u,e.photoPreview]]),o(h,{class:"mt-2 me-2",type:"button",onClick:P(e.selectNewPhoto,["prevent"])},{default:r(()=>[a(" Select A New Photo ")]),_:1},8,["onClick"]),e.user.profile_photo_path?(p(),v(h,{key:0,type:"button",class:"mt-2",onClick:P(e.deletePhoto,["prevent"])},{default:r(()=>[a(" Remove Photo ")]),_:1},8,["onClick"])):w("",!0),o(m,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])])):w("",!0),t("div",D,[t("div",M,[o(l,{for:"name",value:"Name"}),o(_,{id:"name",type:"text",modelValue:e.form.name,"onUpdate:modelValue":s[1]||(s[1]=i=>e.form.name=i),class:c({"is-invalid":e.form.errors.name}),autocomplete:"name"},null,8,["modelValue","class"]),o(m,{message:e.form.errors.name},null,8,["message"])]),t("div",T,[o(l,{for:"email",value:"Email"}),o(_,{id:"email",type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[2]||(s[2]=i=>e.form.email=i),class:c({"is-invalid":e.form.errors.email})},null,8,["modelValue","class"]),o(m,{message:e.form.errors.email},null,8,["message"])])])]),actions:r(()=>[o(b,{class:c({"text-white-50":e.form.processing}),disabled:e.form.processing},{default:r(()=>[d(t("div",z,G,512),[[u,e.form.processing]]),a(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])}const re=B(F,[["render",H]]);export{re as default};
